<link rel="import" href="../bower_components/polymer/polymer-element.html">
<link rel="import" href="../bower_components/polymerfire/polymerfire.html">

<dom-module id="index-view">
  <template>
    <style>
      .btn-edit{
        background-color: #307ce0;
        border:0px;
        padding:7px;
        margin:10px;
        width:100px;
        border-radius:10px;
      }
      .btn-delete{
        background-color: #307ce0;
        border:0px;
        padding:7px;
        margin:10px;
        width:100px;
        border-radius:10px;
        float:right;
      }
      .btn-edit:hover{
        background-color:;
        outline:none;
        cursor:pointer;
      }
      .card{
        box-shadow: 0 4px 8px 0 #000000;
        transition: 0.3s;
        width:300px;
        margin:10px;
        border-radius:10px;
        background-color:white;

      }
      .card-img-top{
        width:250px;
        display:block;
        margin: auto;
        padding:10px;

      }
      .card-body{
        margin:10px;
      }
      .card-title{
        text-align:center;
        font-family: sans-serif;
      }
      .column {
        float: left;
        width: 310px;
        padding: 0 10px;
      }
    </style>
    <firebase-app
        id="firebase"
        auth-domain="agendascrum.firebaseapp.com"
        database-url="https://agendascrum.firebaseio.com"
        api-key="y8eZHkWa8LSs43oKDaQsTyP02pBUSPso60Rwij9G"
        name="agendascrum">
    </firebase-app>
    <firebase-query
        id="personas"
        app-name="agendascrum"
        path="/users/contactos"
        data="{{lista}}">
    </firebase-query>
    <firebase-query
        id="insert"
        app-name="agendascrum"
        path="/users/contactos"
        data="{{datos}}">
    </firebase-query>
    <firebase-query
        id="remove"
        app-name="agendascrum"
        path="/users/contactos"
        data="{{datos}}">
    </firebase-query>
    <dom-repeat items="[[lista]]" as="item" id="item">
    <template>
      <div class="column">
        <div class="card">
          <img src="../imgs/img_distros.jpg" class="card-img-top" alt="100%">
          <div class="card-body">
            <h3 class="card-title">[[item.name]]</h3>
            <p class="card-text">Telefono: [[item.phone]]</p>
            <p class="card-text">Correo Electronico: [[item.email]]</p>
            <button type="button" class="btn-edit">Editar</button>
            <button type="button" class="btn-delete" on-tap="remove" id="dele" value="[[item]]">Eliminar</button>
          </div>
        </div>
      </div>

    </template>
    </dom-repeat>


  </template>

  <script>
    /**
     * `index-view`
     *
     *
     * @customElement
     * @polymer
     * @demo demo/index.html
     */
    class IndexView extends Polymer.GestureEventListeners(Polymer.Element) {
      static get is() { return 'index-view'; }
      static get properties() {
        return {
          datos: {
            type: Object,
            value: { "id":9 ,"nombre":"Prueba INSERT", "telefono": "7224344256","correo":"ejemplo@softtek.com" }
          }
        };
      }
      ready(){
        super.ready();
        console.log('Ejecut√°ndose ready ');
        //instrucciones para alta de nuevos registros a firebase
        this.$.insert.ref.push({
          id: 3,
          email: "insert2@live.com",
          name: "prueba insert1",
          phone: "7224499243",
          image: "ejemplo ruta:"
        });

      }
      //instrucciones para la baja de un registro de firebase
      //let key = e.currentTarget.item.$id;
      // remove(e) {
      //     //let val = this.$.dele.value;
      //     //let val = e.path[0].value;
      //     //let id = e.currentTarget.item.id;
      //     let id = "persona2";
      //     this.$.remove.ref.child(id).remove();
      // }
    }

    window.customElements.define(IndexView.is, IndexView);
  </script>
</dom-module>
